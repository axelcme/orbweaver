<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta
			name="description"
			content="Gardens that change you. Cowichan Valley's mindful alternative to lawn warfare. Natural landcare services including garden coaching, gentle maintenance, and permaculture design."
		/>
		<meta property="og:title" content="Orbweaver Natural Landcare" />
		<meta
			property="og:description"
			content="Your lawn wants to be a garden. Natural landcare services in Cowichan Valley."
		/>
		<meta property="og:type" content="website" />
		<title>Orbweaver Natural Landcare</title>

		<!-- Favicon and Web App Manifest -->
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />
		<link rel="manifest" href="/manifest.json" />
		<meta name="theme-color" content="#7a78b0" />
		
		<!-- Preload LCP image for faster loading -->
		<link rel="preload" as="image" href="/images/hero-800.avif" type="image/avif" />
		<link rel="preload" as="image" href="/images/hero-800.webp" type="image/webp" />
		<link rel="preload" as="image" href="/images/hero-800.jpg" type="image/jpeg" />

		<!-- Google Fonts for rounded, friendly typography -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Quicksand:wght@400;500;600;700&display=swap"
			rel="stylesheet"
			media="print"
			onload="this.media='all'"
		/>
		<noscript>
			<link
				href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Quicksand:wght@400;500;600;700&display=swap"
				rel="stylesheet"
			/>
		</noscript>
		
		<!-- Preload critical CSS for faster rendering -->
		<link rel="preload" as="style" href="styles.min.css" onload="this.onload=null;this.rel='stylesheet'" />
		<noscript><link rel="stylesheet" href="styles.min.css" /></noscript>
		
		<!-- Preload fonts to break dependency chain -->
		<link rel="preload" as="font" href="https://fonts.gstatic.com/s/fredoka/v14/X7nX4b87HvSqjb_WIi2yDCRwoQ_k7367_B-i2yQag0-mac3O8SL_.woff2" type="font/woff2" crossorigin />
		<link rel="preload" as="font" href="https://fonts.gstatic.com/s/quicksand/v31/6xK-dSZaM9iE8KbpRA_LJ3z8mH9BOJvgkP8o58a-wg.woff2" type="font/woff2" crossorigin />
		
		<!-- Critical CSS inline to prevent render blocking -->
		<style>
			/* Critical above-the-fold styles */
			*{margin:0;padding:0;box-sizing:border-box}
			:root{--camas:#7a78b0;--oak-green:#9a8c42;--bark:#6b4c37;--meadow:#f4c431;--sunset:#d98dad;--yarrow:#faf8f7;--lichen:#f8f2ef;--camas-text:#6563a0;--oak-green-text:#6b6030;--bark-text:#5a3d2b;--text-primary:#3a2a18;--text-secondary:#5a4a38;--text-link:#6b5030;--card-bg:var(--yarrow)}
			html{background:var(--lichen);font-family:"Quicksand",system-ui,sans-serif;font-size:16px;line-height:1.6;color:var(--text-primary);scroll-behavior:smooth}
			body{max-width:900px;margin:0 auto;padding:1rem;font-weight:500}
			h1{font-family:"Fredoka",sans-serif;font-size:3rem;font-weight:600;letter-spacing:-1px;color:var(--camas-text);margin-bottom:0}
			h2{font-size:1.25rem;color:var(--oak-green-text);font-weight:600;text-transform:uppercase;letter-spacing:.1em;margin:0 0 .5rem 0}
			header{text-align:left;padding:1rem 0 0 0;position:relative}
			.hero-image{position:relative;width:100%;height:400px;border-radius:1rem;margin:1.5rem 0 2rem 0;overflow:hidden}
			.hero-image img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;z-index:0}
			.hero-image::after{content:"";position:absolute;inset:0;background:linear-gradient(to bottom right,rgba(212,165,116,.55),rgba(212,165,116,.35));z-index:1}
			.hero-overlay{position:relative;z-index:2;display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;text-align:center;color:var(--yarrow);padding:2rem}
			.hero-overlay h2{color:var(--yarrow);font-size:2.5rem;font-weight:700;margin:0 0 1.5rem 0;font-family:"Fredoka",sans-serif;line-height:1.2;text-transform:none;letter-spacing:normal}
			.btn{font-size:1rem;display:inline-block;padding:.75rem 1.5rem;border-radius:2rem;font-weight:600;text-decoration:none;font-family:inherit;cursor:pointer;border:none}
			.btn-primary{background:#5a5890;color:#fff}
			.btn-secondary{background:#6b6030;color:#fff}
			.header-phone{position:absolute;top:3rem;right:0}
			@media (max-width:600px){h1{font-size:2.2rem}h2{font-size:.9rem}.hero-image{height:300px}.hero-overlay h2{font-size:2rem}.header-phone{top:2rem;right:0}}
		</style>
		
		<!-- Structured Data for Local Business SEO -->
		<script type="application/ld+json">
		{
			"@context": "https://schema.org",
			"@type": "LocalBusiness",
			"@id": "https://orbweaver.ca/#business",
			"name": "Orbweaver Natural Landcare",
			"description": "Natural landcare services including garden coaching, gentle maintenance, and permaculture design in Cowichan Valley",
			"url": "https://orbweaver.ca",
			"telephone": "+1-250-710-1010",
			"priceRange": "$",
			"address": {
				"@type": "PostalAddress",
				"addressLocality": "Cowichan Valley",
				"addressRegion": "BC",
				"addressCountry": "CA"
			},
			"geo": {
				"@type": "GeoCoordinates",
				"latitude": 48.8167,
				"longitude": -123.7167
			},
			"areaServed": {
				"@type": "GeoCircle",
				"geoMidpoint": {
					"@type": "GeoCoordinates",
					"latitude": 48.8167,
					"longitude": -123.7167
				},
				"geoRadius": "30000"
			},
			"openingHoursSpecification": {
				"@type": "OpeningHoursSpecification",
				"dayOfWeek": [
					"Monday",
					"Tuesday",
					"Wednesday",
					"Thursday",
					"Friday",
					"Saturday"
				],
				"opens": "08:00",
				"closes": "18:00"
			},
			"hasOfferCatalog": {
				"@type": "OfferCatalog",
				"name": "Natural Landcare Services",
				"itemListElement": [
					{
						"@type": "Offer",
						"itemOffered": {
							"@type": "Service",
							"name": "Garden Coaching",
							"description": "Learn to read what your plants are saying and create abundance without struggle"
						}
					},
					{
						"@type": "Offer",
						"itemOffered": {
							"@type": "Service",
							"name": "Gentle Maintenance",
							"description": "Regular care that makes your garden more independent over time"
						}
					},
					{
						"@type": "Offer",
						"itemOffered": {
							"@type": "Service",
							"name": "Full Garden Design",
							"description": "Native plants, food forests, and rain gardens that solve problems while creating beauty"
						}
					},
					{
						"@type": "Offer",
						"itemOffered": {
							"@type": "Service",
							"name": "Consultation",
							"description": "Initial consultation to assess your outdoor space"
						},
						"price": "150",
						"priceCurrency": "CAD"
					}
				]
			},
			"sameAs": [],
			"image": "https://orbweaver.ca/images/hero-1200.jpg"
		}
		</script>
	</head>
	<body>
		<header>
			<h1>Orbweaver</h1>
			<h2>Natural Landcare</h2>
			<a href="tel:250-710-1010" class="btn btn-secondary header-phone"
				>250&#8209;710&#8209;1010</a
			>
			<div class="hero-image">
				<picture>
					<source 
						srcset="/images/hero-800.avif 800w, /images/hero-1200.avif 1200w" 
						type="image/avif"
						sizes="(max-width: 600px) 100vw, 800px"
					/>
					<source 
						srcset="/images/hero-800.webp 800w, /images/hero-1200.webp 1200w" 
						type="image/webp"
						sizes="(max-width: 600px) 100vw, 800px"
					/>
					<img
						src="/images/hero-800.jpg"
						srcset="/images/hero-800.jpg 800w, /images/hero-1200.jpg 1200w"
						sizes="(max-width: 600px) 100vw, 800px"
						alt="natural meadowscape"
						fetchpriority="high"
						decoding="async"
						width="800"
						height="533"
					/>
				</picture>
				<div class="hero-overlay">
					<h2>Your lawn wants to be a garden.</h2>
					<a href="#contact-form" class="btn btn-primary"
						>Start a conversation</a
					>
				</div>
			</div>
		</header>

		<main>
			<p>
				There's a different way to think about your outdoor space. One
				where you work with nature instead of declaring war on it every
				Sunday.
			</p>

			<blockquote>
				<p>
					We've been told land needs constant control. Trim this.
					Spray that. Fight back the chaos.
				</p>
				<p>
					But what if your garden already knows what it wants to
					become? What if the secret is just learning how to listen?
				</p>
				<p>
					That's what we'll do. We'll observe, we'll understand, then
					we'll guide. The result? Alive and abundant spaces that
					basically take care of themselves.
				</p>
			</blockquote>

			<section>
				<h2>How we work</h2>

				<div class="cards-wrapper">
					<div
						class="cards-container"
						id="howWeWorkCards"
						tabindex="0"
						role="region"
						aria-label="How we work services carousel"
					>
						<article>
							<h3>Build soil, not dependencies</h3>
							<p>
								Healthy soil grows healthy plants. We focus on
								building living soil that gets better each year,
								not dependent on fertilizers or other
								amendments.
							</p>
						</article>

						<article>
							<h3>Plant for the long term</h3>
							<p>
								We choose plants that actually want to grow
								here, from seeds that were born here. They'll
								need less water and care once established.
							</p>
						</article>

						<article>
							<h3>Welcome wildlife</h3>
							<p>
								A balanced garden has predators for every pest.
								We design habitats that attract and shelter
								beneficial insects, reptiles, and birds.
							</p>
						</article>

						<article>
							<h3>Capture rain where it falls</h3>
							<p>
								Using simple earthworks and plantings that slow
								and sink water, we reduce or eliminate
								irrigation needs and prevent erosion.
							</p>
						</article>
					</div>
					<div class="carousel-dots" id="howWeWorkDots"></div>
				</div>

				<aside>
					<h3>Quiet work</h3>
					<p>
						We work with the land, not against it.<br />
						We use scythes, not mowers. Hand tools, not blowers.
						<br />
						Your neighbours will thank you.
					</p>
				</aside>
			</section>

			<section>
				<h2>What we do</h2>

				<div class="cards-wrapper">
					<div
						class="cards-container"
						id="whatWeDoCards"
						tabindex="0"
						role="region"
						aria-label="What we do services carousel"
					>
						<article>
							<h3>Garden coaching</h3>
							<p>For the curious</p>
							<p>
								Think of us as your garden translator.
								We&rsquo;ll teach you to read what your plants
								are actually saying, build soil that's genuinely
								alive, and create abundance without the
								struggle.
							</p>
							<p>
								<mark
									>Perfect if you want to learn but don't know
									where to start.</mark
								>
							</p>
						</article>

						<article>
							<h3>Gentle maintenance</h3>
							<p>For the busy</p>
							<p>
								Regular care that makes your garden more
								independent over time, not less. We prune for
								health, not conformity. Build soil, not deplete
								it. Every visit moves you closer to a
								self-sustaining ecosystem.
							</p>
							<p>
								<mark
									>It's maintenance that has an exit
									strategy.</mark
								>
							</p>
						</article>

						<article>
							<h3>Full garden design</h3>
							<p>For the ready</p>
							<p>
								Let's create something extraordinary. Native
								plants that actually want to be here. Food
								forests that look like art installations. Rain
								gardens that solve problems whilst creating
								beauty.
							</p>
							<p>
								<mark>This is landscape as possibility.</mark>
							</p>
						</article>
					</div>
					<div class="carousel-dots" id="whatWeDoDots"></div>
				</div>

				<div class="boundaries">
					<strong>What we don&rsquo;t do:</strong>
					<p>No plastic, no poison, no petroleum.</p>
					<p>
						No mowing, blowing, irrigation installation,
						hardscaping, or anything requiring heavy machinery. For
						those services, we know excellent people to recommend.
					</p>
					<p>
						No lawns. We'll do <i>area rugs</i> of bee turf, but we
						think it's time to move on from <i>wall-to-wall</i>.
					</p>
					<p>
						As for 'weedeating', we won't run a string trimmer but
						we might make them into a salad.
					</p>
				</div>
			</section>

			<section id="contact-form">
				<h2>Start something</h2>

				<form
					id="contactForm"
					action="https://formspree.io/f/xyzdqbaw"
					method="POST"
				>
					<p>
						Tell us about your space and we'll start a conversation.
						No pressure, no sales pitch. Just two people talking
						about plants.
					</p>

					<label>
						Name
						<input
							type="text"
							name="name"
							placeholder="What should we call you?"
							required
						/>
					</label>

					<label>
						Email
						<input
							type="email"
							name="email"
							placeholder="your@email.com"
							required
						/>
					</label>

					<label>
						Phone (optional)
						<input
							type="tel"
							name="phone"
							placeholder="250-xxx-xxxx"
						/>
					</label>

					<label>
						City (optional)
						<input
							type="text"
							name="city"
							placeholder="Where do your plants live?"
						/>
					</label>

					<!-- Hidden field for Formspree -->
					<input
						type="hidden"
						name="_subject"
						value="New inquiry from Orbweaver website"
					/>

					<label>
						What's happening with your outdoor space?
						<textarea
							name="message"
							rows="4"
							placeholder="Honest assessment welcome. 'Total disaster' is a perfectly valid starting point."
							required
						></textarea>
					</label>

					<label>
						What service interests you most?
						<select name="service">
							<option value="">Choose one (optional)</option>
							<option value="coaching">Garden coaching</option>
							<option value="maintenance">
								Gentle maintenance
							</option>
							<option value="design">Full garden design</option>
							<option value="consultation">
								Just a consultation
							</option>
						</select>
					</label>

					<!-- Honeypot field for spam prevention -->
					<div
						style="position: absolute; left: -5000px"
						aria-hidden="true"
					>
						<input type="text" name="website" tabindex="-1" />
					</div>

					<button type="submit" class="btn btn-primary">
						Let's talk
					</button>
					<div
						id="formMessage"
						class="form-message"
						style="display: none"
					></div>
				</form>

				<div class="service-details">
					<div>
						<strong>Service area:</strong> &#8216;Cowichan
						Valley&#8217;
					</div>
					<div><strong>Consultation:</strong> $150 (incl. taxes)</div>
					<div><strong>Response time:</strong> Within one week.</div>
					<div><strong>Availability:</strong> Now booking for fall '25</div>
				</div>
			</section>
		</main>

		<footer>
			<p>
				<strong>Orbweaver Natural Landcare</strong><br />
				Quw&rsquo;utsun Traditional Lands<br />
			</p>
			<small>Beautiful outdoor spaces, without the warfare.</small>
		</footer>

		<script src="smartquotes.js" defer></script>
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				smartquotes();
			});
		</script>

		<script>
			// Carousel state management to prevent flickering
			const carouselState = {};

			// Throttle function to limit scroll event frequency
			function throttle(func, limit) {
				let inThrottle;
				return function() {
					const args = arguments;
					const context = this;
					if (!inThrottle) {
						func.apply(context, args);
						inThrottle = true;
						setTimeout(() => inThrottle = false, limit);
					}
				}
			}

			// Initialize carousels with improved performance
			function initCarousels() {
				const carousels = [
					{ containerId: "howWeWorkCards", dotsId: "howWeWorkDots" },
					{ containerId: "whatWeDoCards", dotsId: "whatWeDoDots" },
				];

				carousels.forEach((config) => {
					const container = document.getElementById(config.containerId);
					const dotsContainer = document.getElementById(config.dotsId);

					if (!container || !dotsContainer) return;

					const cards = container.querySelectorAll("article");
					
					// Initialize or retrieve state for this carousel
					if (!carouselState[config.containerId]) {
						carouselState[config.containerId] = { 
							currentIndex: 0,
							scrollHandler: null
						};
					}

					// Add keyboard navigation (only once per container)
					if (!container.dataset.keyboardInit) {
						container.dataset.keyboardInit = 'true';
						container.addEventListener("keydown", (e) => {
							if (!cards.length) return;

							const cardWidth = cards[0].offsetWidth + 16;
							const currentScroll = container.scrollLeft;
							const currentIndex = Math.round(currentScroll / cardWidth);

							if (e.key === "ArrowRight") {
								e.preventDefault();
								const nextIndex = Math.min(currentIndex + 1, cards.length - 1);
								container.scrollTo({
									left: nextIndex * cardWidth,
									behavior: "smooth",
								});
							} else if (e.key === "ArrowLeft") {
								e.preventDefault();
								const prevIndex = Math.max(currentIndex - 1, 0);
								container.scrollTo({
									left: prevIndex * cardWidth,
									behavior: "smooth",
								});
							}
						});
					}

					if (window.innerWidth <= 768 && cards.length > 0) {
						// Create or update dot indicators
						if (dotsContainer.children.length !== cards.length) {
							dotsContainer.innerHTML = "";
							cards.forEach((_, index) => {
								const dot = document.createElement("span");
								dot.classList.toggle('active', 
									index === carouselState[config.containerId].currentIndex);
								dotsContainer.appendChild(dot);
							});
						}

						// Remove old scroll handler if it exists
						if (carouselState[config.containerId].scrollHandler) {
							container.removeEventListener('scroll', carouselState[config.containerId].scrollHandler);
						}

						// Create throttled scroll handler
						const updateDots = throttle(() => {
							const scrollPosition = container.scrollLeft;
							const cardWidth = cards[0].offsetWidth + 16;
							const currentIndex = Math.round(scrollPosition / cardWidth);

							// Only update if index actually changed
							if (carouselState[config.containerId].currentIndex !== currentIndex) {
								carouselState[config.containerId].currentIndex = currentIndex;
								
								// Use requestAnimationFrame for smooth visual updates
								requestAnimationFrame(() => {
									const dots = dotsContainer.querySelectorAll("span");
									dots.forEach((dot, index) => {
										dot.classList.toggle("active", index === currentIndex);
									});
								});
							}
						}, 100); // Throttle to 100ms

						// Store and add new scroll handler
						carouselState[config.containerId].scrollHandler = updateDots;
						container.addEventListener("scroll", updateDots, { passive: true });
						
						// Restore scroll position if returning to mobile view
						if (carouselState[config.containerId].currentIndex > 0) {
							const cardWidth = cards[0].offsetWidth + 16;
							container.scrollLeft = carouselState[config.containerId].currentIndex * cardWidth;
						}
					} else {
						// Clear dots on desktop
						dotsContainer.innerHTML = "";
						// Remove scroll handler on desktop
						if (carouselState[config.containerId].scrollHandler) {
							container.removeEventListener('scroll', carouselState[config.containerId].scrollHandler);
							carouselState[config.containerId].scrollHandler = null;
						}
					}
				});
			}

			// Initialize carousels on load
			window.addEventListener("load", initCarousels);
			
			// Debounced resize handler to prevent excessive re-initialization
			let resizeTimeout;
			window.addEventListener("resize", () => {
				clearTimeout(resizeTimeout);
				resizeTimeout = setTimeout(() => {
					initCarousels();
				}, 250);
			});

			// Form submission handler
			document
				.getElementById("contactForm")
				.addEventListener("submit", async function (e) {
					e.preventDefault();

					const form = e.target;
					const formData = new FormData(form);
					const btn = form.querySelector('button[type="submit"]');
					const messageDiv = document.getElementById("formMessage");

					// Check honeypot
					if (formData.get("website")) {
						return; // Bot detected, silently fail
					}

					// Disable button and show loading state
					btn.textContent = "Sending...";
					btn.disabled = true;
					messageDiv.style.display = "none";

					try {
						// Send to Formspree
						const response = await fetch(
							"https://formspree.io/f/xyzdqbaw",
							{
								method: "POST",
								headers: {
									Accept: "application/json",
								},
								body: formData, // Send FormData directly
							}
						);

						const result = await response.json();

						if (response.ok) {
							// Show success message
							messageDiv.textContent =
								"Message received! We'll be in touch within a week.";
							messageDiv.className = "form-message success";
							messageDiv.style.display = "block";

							// Reset form
							form.reset();

							// Reset button after delay
							setTimeout(() => {
								btn.textContent = "Let's talk";
								btn.disabled = false;
								messageDiv.style.display = "none";
							}, 5000);
						} else {
							// Handle Formspree errors
							const errorMsg =
								result.error ||
								"Form submission failed. Please try again.";
							throw new Error(errorMsg);
						}
					} catch (error) {
						// Show error message
						console.error("Form error:", error);
						messageDiv.textContent =
							error.message ||
							"Something went wrong. Please try again or email us directly.";
						messageDiv.className = "form-message error";
						messageDiv.style.display = "block";

						btn.textContent = "Let's talk";
						btn.disabled = false;
					}
				});

			// Add smooth scroll behaviour for any internal links
			document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
				anchor.addEventListener("click", function (e) {
					e.preventDefault();
					const target = document.querySelector(
						this.getAttribute("href")
					);
					if (target) {
						target.scrollIntoView({ behavior: "smooth" });
					}
				});
			});
		</script>
	</body>
	
	<!-- Living Presence Animation for Orbweaver.ca -->
	<canvas id="orb-presence-canvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;"></canvas>
	
	<script>
	(function() {
		// Encapsulate everything to avoid conflicts
		const canvas = document.getElementById('orb-presence-canvas');
		const ctx = canvas.getContext('2d');
		
		// Set canvas size
		function resizeCanvas() {
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;
		}
		resizeCanvas();
		window.addEventListener('resize', resizeCanvas);
	
		// Mouse position tracking
		let mouseX = window.innerWidth / 2;
		let mouseY = window.innerHeight / 2;
		let mouseStillTimer = 0;
		let lastMouseX = mouseX;
		let lastMouseY = mouseY;
	
		window.addEventListener('mousemove', (e) => {
			mouseX = e.clientX;
			mouseY = e.clientY;
			mouseStillTimer = 0;
		});
	
		// Touch support for mobile
		window.addEventListener('touchstart', (e) => {
			if (e.touches.length > 0) {
				mouseX = e.touches[0].clientX;
				mouseY = e.touches[0].clientY;
				mouseStillTimer = 100; // Treat touch as "stillness"
			}
		});
	
		// Orb class
		class Orb {
			constructor() {
				this.reset();
				this.x = Math.random() * canvas.width;
				this.y = Math.random() * canvas.height;
			}
	
			reset() {
				this.targetX = Math.random() * canvas.width;
				this.targetY = Math.random() * canvas.height;
				this.size = Math.random() * 12 + 4;
				this.baseOpacity = Math.random() * 0.25 + 0.05; // Even more subtle
				this.opacity = 0;
				this.pulsePhase = Math.random() * Math.PI * 2;
				this.speed = Math.random() * 0.4 + 0.2;
				this.touchDistance = Math.random() * 80 + 40;
				this.hasApproached = false;
				this.approachCooldown = 0;
				this.glowIntensity = 0;
			}
	
			update() {
				// Fade in slowly
				if (this.opacity < this.baseOpacity) {
					this.opacity += 0.0005;
				}
	
				// Organic movement
				const dx = this.targetX - this.x;
				const dy = this.targetY - this.y;
				const distance = Math.sqrt(dx * dx + dy * dy);
	
				if (distance > 5) {
					this.x += (dx / distance) * this.speed;
					this.y += (dy / distance) * this.speed;
				} else {
					this.targetX = Math.random() * canvas.width;
					this.targetY = Math.random() * canvas.height;
				}
	
				// Floating motion
				this.x += Math.sin(Date.now() * 0.0001 + this.pulsePhase) * 0.3;
				this.y += Math.cos(Date.now() * 0.0001 + this.pulsePhase) * 0.2;
	
				this.pulsePhase += 0.01;
	
				// Approach still mouse
				if (mouseStillTimer > 120 && !this.hasApproached && this.approachCooldown <= 0) {
					const mouseDistance = Math.sqrt(
						Math.pow(this.x - mouseX, 2) + 
						Math.pow(this.y - mouseY, 2)
					);
					
					if (mouseDistance < 200) {
						this.targetX = mouseX + (Math.random() - 0.5) * 50;
						this.targetY = mouseY + (Math.random() - 0.5) * 50;
						this.speed = 0.6;
						this.glowIntensity = Math.min(1, this.glowIntensity + 0.02);
						
						if (mouseDistance < this.touchDistance) {
							this.hasApproached = true;
							this.approachCooldown = 300;
							createGlimmer(this.x, this.y);
						}
					}
				} else {
					this.speed = Math.random() * 0.4 + 0.2;
					this.glowIntensity = Math.max(0, this.glowIntensity - 0.01);
				}
	
				if (this.approachCooldown > 0) {
					this.approachCooldown--;
					if (this.approachCooldown === 0) {
						this.hasApproached = false;
					}
				}
	
				// Boundary wrapping
				if (this.x < -50) this.x = canvas.width + 50;
				if (this.x > canvas.width + 50) this.x = -50;
				if (this.y < -50) this.y = canvas.height + 50;
				if (this.y > canvas.height + 50) this.y = -50;
			}
	
			draw() {
				const pulse = Math.sin(this.pulsePhase) * 0.15 + 1;
				const currentSize = this.size * pulse;
				
				// Soft glow
				const gradient = ctx.createRadialGradient(
					this.x, this.y, 0,
					this.x, this.y, currentSize * 2.5
				);
				
				gradient.addColorStop(0, `rgba(255, 248, 230, ${this.opacity * 0.6 + this.glowIntensity * 0.2})`);
				gradient.addColorStop(0.4, `rgba(255, 236, 200, ${this.opacity * 0.3})`);
				gradient.addColorStop(1, `rgba(255, 255, 255, 0)`);
				
				ctx.fillStyle = gradient;
				ctx.beginPath();
				ctx.arc(this.x, this.y, currentSize * 2.5, 0, Math.PI * 2);
				ctx.fill();
				
				// Inner core
				ctx.fillStyle = `rgba(255, 255, 245, ${this.opacity * 0.4 + this.glowIntensity * 0.3})`;
				ctx.beginPath();
				ctx.arc(this.x, this.y, currentSize * 0.4, 0, Math.PI * 2);
				ctx.fill();
			}
		}
	
		// Create orbs
		const orbs = [];
		const orbCount = 6;
		for (let i = 0; i < orbCount; i++) {
			setTimeout(() => {
				orbs.push(new Orb());
			}, i * 3000 + Math.random() * 2000);
		}
	
		// Butterfly creation
		function createButterfly() {
			const butterfly = document.createElement('div');
			butterfly.className = 'orb-butterfly';
			butterfly.innerHTML = `
				<div class="orb-butterfly-wing left"></div>
				<div class="orb-butterfly-wing right"></div>
			`;
			document.body.appendChild(butterfly);
	
			const startX = Math.random() < 0.5 ? -50 : window.innerWidth + 50;
			let x = startX;
			let y = Math.random() * window.innerHeight;
			let vx = startX < 0 ? 1 : -1;
			let vy = (Math.random() - 0.5) * 0.5;
			let wavePhase = Math.random() * Math.PI * 2;
	
			butterfly.style.left = x + 'px';
			butterfly.style.top = y + 'px';
			
			setTimeout(() => {
				butterfly.style.opacity = '0.6';
			}, 100);
	
			const moveButterfly = () => {
				x += vx * 1.5;
				y += vy * 1.5 + Math.sin(wavePhase) * 1.2;
				wavePhase += 0.05;
	
				if (Math.random() < 0.015) {
					vy = (Math.random() - 0.5) * 0.5;
				}
	
				butterfly.style.left = x + 'px';
				butterfly.style.top = y + 'px';
	
				if (x < -60 || x > window.innerWidth + 60) {
					butterfly.style.opacity = '0';
					setTimeout(() => {
						if (butterfly.parentNode) {
							document.body.removeChild(butterfly);
						}
					}, 2000);
				} else {
					requestAnimationFrame(moveButterfly);
				}
			};
	
			requestAnimationFrame(moveButterfly);
		}
	
		// Create glimmer
		function createGlimmer(x, y) {
			const glimmer = document.createElement('div');
			glimmer.className = 'orb-glimmer';
			glimmer.style.left = x + 'px';
			glimmer.style.top = y + 'px';
			document.body.appendChild(glimmer);
			
			setTimeout(() => {
				if (glimmer.parentNode) {
					document.body.removeChild(glimmer);
				}
			}, 3000);
		}
	
		// Butterfly spawning
		setInterval(() => {
			if (Math.random() < 0.25) { // 25% chance
				createButterfly();
			}
		}, 20000); // Check every 20 seconds
	
		// Animation loop
		function animate() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			
			// Update mouse stillness
			if (Math.abs(mouseX - lastMouseX) < 2 && Math.abs(mouseY - lastMouseY) < 2) {
				mouseStillTimer++;
			} else {
				mouseStillTimer = 0;
			}
			lastMouseX = mouseX;
			lastMouseY = mouseY;
			
			// Update and draw orbs
			orbs.forEach(orb => {
				orb.update();
				orb.draw();
			});
			
			requestAnimationFrame(animate);
		}
	
		animate();
	
		// First butterfly after 8 seconds
		setTimeout(createButterfly, 8000);
	})();
	</script>
	
</html>