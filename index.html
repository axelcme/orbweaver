<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta
			name="description"
			content="Gardens that change you. Cowichan Valley's mindful alternative to lawn warfare. Natural landcare services including garden coaching, gentle maintenance, and permaculture design."
		/>
		<meta property="og:title" content="Orbweaver Natural Landcare" />
		<meta
			property="og:description"
			content="Your lawn wants to be a garden. Natural landcare services in Cowichan Valley."
		/>
		<meta property="og:type" content="website" />
		<title>Orbweaver Natural Landcare</title>

		<!-- Favicon placeholder - add your own favicon.ico to root directory -->
		<link rel="icon" type="image/x-icon" href="/favicon.ico" />

		<!-- Google Fonts for rounded, friendly typography -->
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link
			href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600&family=Quicksand:wght@400;500;600;700&display=swap"
			rel="stylesheet"
		/>

		<style>
			/* Modern CSS enhancements */
			@supports (container-type: inline-size) {
				.cards-wrapper {
					container-type: inline-size;
				}
			}

			/* Reset and base styles */
			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			/* Gary Oak ecosystem palette - Light mode (default) */
			:root {
				/* Core palette - preserved */
				--camas: #7a78b0;
				--oak-green: #9a8c42;
				--bark: #6b4c37;
				--meadow: #f4c431;
				--sunset: #d98dad;
				--yarrow: #faf8f7;
				--lichen: #f8f2ef;

				/* Enhanced contrast variants for text */
				--camas-text: #6563a0; /* Darker camas for better contrast */
				--oak-green-text: #6b6030; /* Darker oak for WCAG AA */
				--bark-text: #5a3d2b; /* Darker bark for text */
				
				/* Text colors */
				--text-primary: #3a2a18; /* Darker for better contrast */
				--text-secondary: #5a4a38; /* Darker secondary text */
				--text-link: #6b5030; /* Darker link color for AA compliance */

				/* Card background */
				--card-bg: var(--yarrow);

				/* Border radius */
				--radius: 1.5rem;
				--radius-small: 0.75rem;
			}

			/* Global button styles */
			.btn {
				font-size: 1rem;
				display: inline-block;
				padding: 0.75rem 1.5rem;
				border-radius: 2rem;
				font-weight: 600;
				text-decoration: none;
				font-family: inherit;
				transition: all 0.25s ease;
				cursor: pointer;
				border: none;
				transform: translateZ(0); /* Prevent flickering */
				backface-visibility: hidden;
			}

			/* Primary button (camas purple) */
			.btn-primary {
				background: #5a5890; /* Darker purple for WCAG AA with white text */
				color: #fff;
				border: none;
			}

			.btn-primary:hover {
				background: #5a5890;
				color: #fff;
				box-shadow: 0 0 12px rgba(90, 88, 144, 0.6);
				transform: translateY(-2px);
				text-decoration: none;
			}

			/* Secondary button (oak green) */
			.btn-secondary {
				background: #6b6030; /* Darker green for WCAG AA with white text */
				color: #fff;
				border: none;
			}

			.btn-secondary:hover {
				background: #6b6030;
				color: #fff;
				box-shadow: 0 0 12px rgba(107, 96, 48, 0.6);
				transform: translateY(-2px);
				text-decoration: none;
			}

			/* Disabled state */
			.btn:disabled {
				opacity: 0.6;
				cursor: not-allowed;
				transform: none !important;
				box-shadow: none !important;
			}

			/* Mobile-specific button adjustments */
			@media (max-width: 768px) {
				.btn:hover {
					transform: none !important;
				}
			}

			/* Desktop-only hover animations */
			@media (hover: hover) and (pointer: fine) {
				.btn-primary:hover,
				.btn-secondary:hover {
					transform: translateY(-2px);
				}
			}

			/* Base styles */
			html {
				background: var(--lichen);
				font-family: "Quicksand", system-ui, sans-serif;
				font-size: 16px;
				line-height: 1.6;
				color: var(--text-primary);
				scroll-behavior: smooth;
			}

			body {
				max-width: 900px;
				margin: 0 auto;
				padding: 1rem;
				font-weight: 500;
			}

			/* Typography */
			h1,
			h2,
			h3,
			h4,
			h5,
			h6 {
				font-weight: 600;
				line-height: 1.3;
				margin-bottom: 1rem;
			}

			h1 {
				font-family: "Fredoka", sans-serif;
				font-size: 3rem;
				font-weight: 600;
				letter-spacing: -1px;
				color: var(--camas-text);
			}

			h2 {
				font-size: 1.6rem;
				color: var(--bark);
				margin-top: 3rem;
				margin-bottom: 1.5rem;
			}

			h3 {
				font-size: 1.15rem;
				color: var(--bark);
			}

			p {
				margin-bottom: 1rem;
			}

			a {
				color: var(--text-link);
				text-decoration: none;
				transition: all 0.2s ease;
				font-weight: 600;
			}

			a:hover {
				color: var(--bark-text);
				text-decoration: underline;
			}

			/* Header styles */
			header {
				text-align: left;
				padding: 1rem 0 0 0;
				position: relative;
			}

			header h1 {
				margin-bottom: 0rem;
				transition: transform 0.3s ease;
			}

			header h1:hover {
				margin-bottom: 0rem;
				transform: scale(1.02);
			}

			header h2 {
				color: var(--oak-green-text);
				font-size: 1.25rem;
				font-weight: 600;
				text-transform: uppercase;
				letter-spacing: 0.1em;
				margin-top: 0;
				margin-bottom: 0.5rem;
			}

			/* Remove old header p styles that are no longer needed */

			/* Phone button in top right */
			.header-phone {
				position: absolute;
				top: 3rem;
				right: 0;
			}

			/* Show phone button on all devices */
			@media (max-width: 600px) {
				.header-phone {
					top: 2rem;
					right: 0rem;
				}
			}

			.hero-image {
				position: relative;
				width: 100%;
				height: 400px;
				border-radius: 1rem;
				margin: 1.5rem 0 2rem 0;
				overflow: hidden;
				isolation: isolate; /* Create stacking context for better performance */
			}

			/* Image background */
			.hero-image img {
				position: absolute;
				inset: 0;
				width: 100%;
				height: 100%;
				object-fit: cover;
				z-index: 0;
			}

			/* Golden overlay with backdrop-filter support */
			.hero-image::after {
				content: "";
				position: absolute;
				inset: 0;
				background: linear-gradient(
					to bottom right,
					rgba(212, 165, 116, 0.55),
					rgba(212, 165, 116, 0.35)
				);
				z-index: 1;
			}

			/* Use backdrop-filter for modern browsers */
			@supports (backdrop-filter: blur(1px)) {
				.hero-image::after {
					background: linear-gradient(
						to bottom right,
						rgba(212, 165, 116, 0.45),
						rgba(212, 165, 116, 0.25)
					);
					backdrop-filter: blur(1px) brightness(1.1);
				}
			}

			/* Center overlay content */
			.hero-overlay {
				position: relative;
				z-index: 2;
				display: flex;
				flex-direction: column;
				justify-content: center;
				align-items: center;
				height: 100%;
				text-align: center;
				color: var(--yarrow);
				/* yarrow text like cards */
				padding: 2rem;
			}

			.hero-overlay h2 {
				color: var(--yarrow);
				/* force yarrow like cards */
				font-size: 2.5rem;
				font-weight: 700;
				margin: 0 0 1.5rem 0;
				font-family: "Fredoka", sans-serif;
				line-height: 1.2;
				text-transform: none;
				/* cancel uppercase */
				letter-spacing: normal;
				/* cancel extra spacing */
			}

			/* Main content */
			main > p:first-of-type {
				font-size: 1.25rem;
				line-height: 1.7;
				font-weight: 500;
			}

			/* Blockquote */
			blockquote {
				background: linear-gradient(
					135deg,
					rgba(212, 165, 116, 0.08),
					rgba(107, 91, 149, 0.04)
				);
				border-left: 3px solid var(--oak-green);
				border-radius: 1rem;
				padding: 1.5rem;
				margin: 2rem 0;
			}

			blockquote p {
				font-size: 1.05rem;
				line-height: 1.7;
				margin-bottom: 0.8rem;
			}

			blockquote p:last-child {
				margin-bottom: 0;
			}

			/* Article cards container */
			.cards-container {
				display: grid;
				grid-template-columns: 1fr;
				gap: 1.5rem;
				position: relative;
				margin-bottom: 1rem;
			}

			/* Article cards with modern enhancements */
			article {
				background: var(--card-bg);
				padding: 1.5rem;
				border-radius: 1.2rem;
				box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
				transition: all 0.3s ease;
				will-change: transform;
				backface-visibility: hidden;
				/* Optimize hover animations */
				content-visibility: auto; /* Faster initial paint */
				transform: translateZ(0);
				-webkit-font-smoothing: antialiased;
			}

			/* Mobile-specific optimizations to prevent flickering */
			@media (max-width: 768px) {
				article {
					/* Disable hover effects on mobile */
					transition: none;
					will-change: auto;
					/* Force GPU acceleration but prevent repaints */
					transform: translate3d(0, 0, 0);
					-webkit-transform: translate3d(0, 0, 0);
					/* Prevent text rendering issues */
					-webkit-backface-visibility: hidden;
					-moz-backface-visibility: hidden;
					backface-visibility: hidden;
					/* Optimize text rendering */
					-webkit-font-smoothing: subpixel-antialiased;
					-moz-osx-font-smoothing: auto;
					/* Prevent transform inheritance issues */
					transform-style: preserve-3d;
					-webkit-transform-style: preserve-3d;
				}
			}

			article h3 {
				font-weight: 700;
			}

			/* Scroll-driven animations for cards */
			@supports (animation-timeline: view()) {
				@media (min-width: 769px) {
					article {
						animation: fade-up linear;
						animation-timeline: view();
						animation-range: entry 0% cover 40%;
					}

					@keyframes fade-up {
						from {
							opacity: 0;
							transform: translateY(20px);
						}
						to {
							opacity: 1;
							transform: translateY(0);
						}
					}
				}
			}

			/* Desktop hover effects - only on non-touch devices */
			@media (hover: hover) and (pointer: fine) {
				article:hover {
					box-shadow: 0 6px 24px rgba(107, 91, 149, 0.08);
					transform: translateY(-2px);
				}
			}

			/* Mobile carousel styles */
			@media (max-width: 768px) {
				.cards-wrapper {
					position: relative;
					margin: 0 -1rem 2rem -1rem;
					padding: 0 1rem;
					/* Isolate stacking context to prevent repaints */
					isolation: isolate;
					z-index: 1;
				}

				.cards-container {
					overflow-x: auto;
					scroll-snap-type: x mandatory;
					display: flex;
					gap: 1rem;
					padding-bottom: 1.5rem;
					scrollbar-width: none;
					-ms-overflow-style: none;
					-webkit-overflow-scrolling: touch;
					/* Prevent flickering with will-change on scroll container */
					will-change: scroll-position;
					/* Create new stacking context */
					contain: layout style paint;
				}

				.cards-container::-webkit-scrollbar {
					display: none;
				}

				.cards-container:focus {
					outline: 2px solid #7a6f35;
					outline-offset: 2px;
					border-radius: 0.5rem;
				}

				.cards-container article {
					flex: 0 0 calc(100% - 4rem);
					scroll-snap-align: start;
					scroll-snap-stop: always;
					margin-left: 0;
					/* Additional mobile optimizations for cards in carousel */
					position: relative;
					z-index: 1;
					/* Prevent text flickering on iOS */
					-webkit-transform: translateZ(0);
					transform: translateZ(0);
				}

				.cards-container article:first-child {
					margin-left: 0.5rem;
				}

				.cards-container article:last-child {
					margin-right: 1rem;
				}

				/* Disable hover effects on mobile to prevent flickering */
				article:hover {
					transform: none !important;
					box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08) !important;
				}

				/* Simple dot indicators */
				.carousel-dots {
					display: flex;
					justify-content: center;
					gap: 0.5rem;
					margin-top: -0.5rem;
				}

				.carousel-dots span {
					width: 6px;
					height: 6px;
					border-radius: 50%;
					background: rgba(107, 91, 149, 0.2);
					transition: all 0.3s ease;
				}

				.carousel-dots span.active {
					background: var(--oak-green);
					width: 20px;
					border-radius: 3px;
				}

				@media (prefers-color-scheme: dark) {
					.carousel-dots span {
						background: rgba(229, 194, 155, 0.2);
					}

					.carousel-dots span.active {
						background: var(--meadow);
					}
				}
			}

			/* Tablet and desktop grid with subgrid support */
			@media (min-width: 769px) {
				.cards-container {
					grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
				}

				/* Force 2x2 grid for How we work section */
				#howWeWorkCards {
					grid-template-columns: repeat(2, 1fr);
				}

				/* Use subgrid for perfect alignment when supported */
				@supports (grid-template-rows: subgrid) {
					.cards-container {
						grid-template-rows: auto auto auto;
					}

					.cards-container article {
						display: grid;
						grid-template-rows: subgrid;
						grid-row: span 3;
					}

					#whatWeDoCards article {
						grid-template-rows: subgrid;
						grid-row: span 4; /* Extra row for subtitle */
					}
				}

				.carousel-dots {
					display: none;
				}
			}

			article h3 {
				color: var(--camas-text);
				margin-bottom: 0.8rem;
			}

			/* Only style the subtitle in "What we do" section */
			#whatWeDoCards article h3 + p {
				color: var(--oak-green-text);
				font-style: italic;
				font-size: 0.95rem;
				margin-bottom: 1rem;
				font-weight: 600; /* Increased weight for better contrast with italic */
			}

			/* Aside callout with sunset gradient and strong contrast */
			aside {
				background: linear-gradient(
					135deg,
					var(--meadow),
					var(--sunset)
				);
				border-radius: 2rem;
				padding: 2.5rem;
				margin: 2rem 0;
				text-align: center;
				box-shadow: 0 6px 20px rgba(244, 182, 163, 0.3);
				position: relative;
				overflow: hidden;
			}

			/* Add subtle texture/depth */
			aside::before {
				content: "";
				position: absolute;
				top: -50%;
				right: -50%;
				width: 200%;
				height: 200%;
				background: radial-gradient(
					circle,
					rgba(255, 255, 255, 0.1) 0%,
					transparent 70%
				);
				pointer-events: none;
			}

			aside h3 {
				color: #3a2a1a; /* Even darker for better gradient contrast */
				margin-bottom: 0.5rem;
				font-weight: 700;
				font-size: 1.4rem;
				text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
				position: relative;
			}

			aside p {
				font-weight: 600;
				font-size: 1.05rem;
				margin-bottom: 0.5rem;
				color: #2a1a0a; /* Maximum contrast for accessibility */
				position: relative;
			}

			aside p:last-child {
				margin-bottom: 0;
			}

			/* Mark highlight */
			mark {
				background: rgba(212, 165, 116, 0.2);
				color: inherit;
				padding: 0.2rem 0.4rem;
				border-radius: 0.3rem;
				font-weight: 600;
				display: inline-block;
				line-height: 1.4;
			}

			/* Boundaries box - more prominent */
			.boundaries {
				padding: 1.5rem;
				background: linear-gradient(
					135deg,
					rgba(139, 106, 71, 0.08),
					rgba(107, 91, 149, 0.05)
				);
				border-left: 3px solid var(--bark);
				border-radius: 0.5rem;
				margin: 2rem 0;
				font-size: 0.95rem;
			}

			.boundaries strong {
				display: block;
				color: var(--bark);
				font-size: 1.05rem;
				margin-bottom: 0.5rem;
			}

			/* Form styles */
			form {
				background: var(--card-bg);
				padding: 2rem;
				border-radius: 1.5rem;
				box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
				margin-bottom: 0;
				position: relative;
				z-index: 1;
			}

			form p {
				margin-bottom: 1.5rem;
			}

			label {
				display: block;
				margin-bottom: 1.5rem;
				font-weight: 600;
				color: var(--text-primary);
			}

			input,
			textarea,
			select {
				width: 100%;
				padding: 0.75rem 1rem;
				margin-top: 0.5rem;
				border: 1px solid rgba(212, 165, 116, 0.3);
				border-radius: 0.75rem;
				background: var(--lichen);
				font-family: inherit;
				font-size: 1rem;
				font-weight: 500;
				transition: all 0.2s ease;
			}

			input:focus,
			textarea:focus,
			select:focus {
				outline: none;
				border-color: var(--oak-green);
				box-shadow: 0 0 0 4px rgba(154, 140, 66, 0.1);
			}

			textarea {
				resize: vertical;
				min-height: 120px;
			}

			/* Form message */
			.form-message {
				margin-top: 1rem;
				padding: 1rem;
				border-radius: 0.5rem;
				text-align: center;
				font-weight: 600;
			}

			.form-message.success {
				background: rgba(154, 140, 66, 0.1);
				color: var(--oak-green);
			}

			.form-message.error {
				background: rgba(244, 182, 163, 0.2);
				color: var(--bark);
			}

			/* Service details grid - layered under form */
			.service-details {
				display: grid;
				grid-template-columns: 1fr 1fr;
				gap: 1rem;
				padding: 3rem 2rem 2rem 2rem;
				background: #5a5025; /* Much darker for contrast with white text */
				color: #fff; /* Pure white for maximum contrast */
				border-radius: 0 0 1.5rem 1.5rem;
				font-size: 0.95rem;
				box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
				position: relative;
				margin-top: -1rem;
				z-index: 0;
			}

			.service-details strong {
				color: #fff;
			}

			/* Contact form anchor for smooth scrolling */
			#contact-form {
				scroll-margin-top: 2rem;
			}

			/* Footer */
			footer {
				text-align: center;
				margin-top: 4rem;
				padding: 2rem 0;
			}

			footer strong {
				color: var(--camas-text);
			}

			footer small {
				color: var(--oak-green-text);
				font-weight: 600;
			}

			/* Dark mode with color-scheme for better OS integration */
			@media (prefers-color-scheme: dark) {
				:root {
					color-scheme: dark;
					--camas: #b5a8d4;
					--meadow: #f0d4a8;
					--oak-green: #c5b874;
					--bark: #b89b82;
					--sunset: #f5bcb0;
					--yarrow: #4a453f;
					--lichen: #3a3530;
					
					/* Enhanced contrast variants for dark mode */
					--camas-text: #c5b8e4; /* Lighter for dark backgrounds */
					--oak-green-text: #d5c884; /* Lighter oak for dark mode */
					--bark-text: #c8ab92; /* Lighter bark for dark mode */
					
					--text-primary: #f5f0e8;
					--text-secondary: #d5d0c8;
					--text-link: #d5c884; /* Light enough for dark backgrounds */
					--card-bg: #4a453f;
				}

				html {
					background: #2a2520; /* Slightly warmer dark background */
				}

				/* Darker overlay but keep text light for contrast */
				.hero-image::after {
					background: linear-gradient(
						to bottom right,
						rgba(42, 37, 32, 0.7),
						/* Much darker overlay */ rgba(58, 53, 48, 0.5)
					);
				}

				@supports (backdrop-filter: blur(1px)) {
					.hero-image::after {
						background: linear-gradient(
							to bottom right,
							rgba(42, 37, 32, 0.6),
							rgba(58, 53, 48, 0.4)
						);
						backdrop-filter: blur(2px) brightness(0.7);
					}
				}

				/* Keep hero text light/yarrow for contrast */
				.hero-overlay h2,
				.hero-overlay .btn-primary {
					color: #fbf7f0 !important; /* Ensure yarrow text stays light */
				}

				/* Keep buttons dark enough for contrast in dark mode */
				.btn-primary {
					background: #8a88c0; /* Lighter but still has contrast with white text */
				}
				
				.btn-primary:hover {
					background: #8a88c0;
					box-shadow: 0 0 12px rgba(138, 136, 192, 0.6);
				}
				
				.btn-secondary {
					background: #8b8050; /* Lighter but still has contrast */
				}
				
				.btn-secondary:hover {
					background: #8b8050;
					box-shadow: 0 0 12px rgba(139, 128, 80, 0.6);
				}

				.hero-overlay .btn-primary {
					background: #8a88c0;
					box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
				}

				.hero-overlay .btn-primary:hover {
					background: #8a88c0;
					color: #fff !important;
					box-shadow: 0 0 12px rgba(138, 136, 192, 0.6);
					transform: translateY(-2px);
					text-decoration: none;
				}

				aside {
					background: linear-gradient(
						135deg,
						rgba(181, 168, 100, 0.9),
						rgba(155, 142, 199, 0.85)
					);
					box-shadow: 0 6px 20px rgba(155, 142, 199, 0.4);
				}

				aside::before {
					background: radial-gradient(
						circle,
						rgba(255, 255, 255, 0.05) 0%,
						transparent 70%
					);
				}

				aside h3 {
					color: #f5f0e8;
					text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
				}

				aside p {
					color: #f5f0e8;
				}

				.service-details {
					background: #1a1815; /* Darker for more contrast */
					color: var(--text-primary);
				}

				.service-details strong {
					color: var(--meadow);
				}

				input,
				textarea,
				select {
					background: #2a2520;
					border-color: rgba(197, 184, 116, 0.3);
					color: var(--text-primary);
				}

				mark {
					background: rgba(197, 184, 116, 0.2);
					color: var(--text-primary);
				}

				.boundaries {
					background: linear-gradient(
						135deg,
						rgba(197, 184, 116, 0.08),
						rgba(181, 168, 212, 0.05)
					);
					border-left-color: var(--oak-green);
				}
			}

			/* Mobile responsive */
			@media (max-width: 600px) {
				h1 {
					font-size: 2.2rem;
				}

				header h2 {
					font-size: 0.9rem;
				}

				main > p:first-of-type {
					font-size: 1.15rem;
				}

				.hero-image {
					height: 300px;
				}

				.hero-overlay h2 {
					font-size: 2rem;
				}

				.service-details {
					grid-template-columns: 1fr;
				}
			}

			/* Container queries for responsive card content */
			@container (min-width: 400px) {
				article p {
					font-size: 1.05rem;
				}
			}

			/* View Transitions API for smooth navigation */
			@supports (view-transition-name: hero) {
				.hero-image {
					view-transition-name: hero;
				}

				header h1 {
					view-transition-name: title;
				}
			}

			/* Modern focus styles */
			:focus-visible {
				outline: 2px solid var(--oak-green);
				outline-offset: 2px;
			}

			/* Remove old focus styles for mouse users */
			:focus:not(:focus-visible) {
				outline: none;
			}

			/* Print styles */
			@media print {
				body {
					font-size: 11pt;
				}

				article {
					page-break-inside: avoid;
				}

				form,
				aside {
					display: none;
				}
			}
		</style>
	</head>
	<body>
		<header>
			<h1>Orbweaver</h1>
			<h2>Natural Landcare</h2>
			<a href="tel:250-710-1010" class="btn btn-secondary header-phone"
				>250&#8209;710&#8209;1010</a
			>
			<div class="hero-image">
				<img
					src="/images/hero.jpg"
					alt="natural meadowscape"
					loading="lazy"
				/>
				<div class="hero-overlay">
					<h2>Your lawn wants to be a garden.</h2>
					<a href="#contact-form" class="btn btn-primary"
						>Start a conversation</a
					>
				</div>
			</div>
		</header>

		<main>
			<p>
				There's a different way to think about your outdoor space. One
				where you work with nature instead of declaring war on it every
				Sunday.
			</p>

			<blockquote>
				<p>
					We've been told land needs constant control. Trim this.
					Spray that. Fight back the chaos.
				</p>
				<p>
					But what if your garden already knows what it wants to
					become? What if the secret is just learning how to listen?
				</p>
				<p>
					That's what we'll do. We'll observe, we'll understand, then
					we'll guide. The result? Alive and abundant spaces that
					basically take care of themselves.
				</p>
			</blockquote>

			<section>
				<h2>How we work</h2>

				<div class="cards-wrapper">
					<div
						class="cards-container"
						id="howWeWorkCards"
						tabindex="0"
						role="region"
						aria-label="How we work services carousel"
					>
						<article>
							<h3>Build soil, not dependencies</h3>
							<p>
								Healthy soil grows healthy plants. We focus on
								building living soil that gets better each year,
								not dependent on fertilizers or other
								amendments.
							</p>
						</article>

						<article>
							<h3>Plant for the long term</h3>
							<p>
								We choose plants that actually want to grow
								here, from seeds that were born here. They'll
								need less water and care once established.
							</p>
						</article>

						<article>
							<h3>Welcome wildlife</h3>
							<p>
								A balanced garden has predators for every pest.
								We design habitats that attract and shelter
								beneficial insects, reptiles, and birds.
							</p>
						</article>

						<article>
							<h3>Capture rain where it falls</h3>
							<p>
								Using simple earthworks and plantings that slow
								and sink water, we reduce or eliminate
								irrigation needs and prevent erosion.
							</p>
						</article>
					</div>
					<div class="carousel-dots" id="howWeWorkDots"></div>
				</div>

				<aside>
					<h3>Quiet work</h3>
					<p>
						We work with the land, not against it.<br />
						We use scythes, not mowers. Hand tools, not blowers.
						<br />
						Your neighbours will thank you.
					</p>
				</aside>
			</section>

			<section>
				<h2>What we do</h2>

				<div class="cards-wrapper">
					<div
						class="cards-container"
						id="whatWeDoCards"
						tabindex="0"
						role="region"
						aria-label="What we do services carousel"
					>
						<article>
							<h3>Garden coaching</h3>
							<p>For the curious</p>
							<p>
								Think of us as your garden translator.
								We&rsquo;ll teach you to read what your plants
								are actually saying, build soil that's genuinely
								alive, and create abundance without the
								struggle.
							</p>
							<p>
								<mark
									>Perfect if you want to learn but don't know
									where to start.</mark
								>
							</p>
						</article>

						<article>
							<h3>Gentle maintenance</h3>
							<p>For the busy</p>
							<p>
								Regular care that makes your garden more
								independent over time, not less. We prune for
								health, not conformity. Build soil, not deplete
								it. Every visit moves you closer to a
								self-sustaining ecosystem.
							</p>
							<p>
								<mark
									>It's maintenance that has an exit
									strategy.</mark
								>
							</p>
						</article>

						<article>
							<h3>Full garden design</h3>
							<p>For the ready</p>
							<p>
								Let's create something extraordinary. Native
								plants that actually want to be here. Food
								forests that look like art installations. Rain
								gardens that solve problems whilst creating
								beauty.
							</p>
							<p>
								<mark>This is landscape as possibility.</mark>
							</p>
						</article>
					</div>
					<div class="carousel-dots" id="whatWeDoDots"></div>
				</div>

				<div class="boundaries">
					<strong>What we don&rsquo;t do:</strong>
					<p>No plastic, no poison, no petroleum.</p>
					<p>
						No mowing, blowing, irrigation installation,
						hardscaping, or anything requiring heavy machinery. For
						those services, we know excellent people to recommend.
					</p>
					<p>
						No lawns. We'll do <i>area rugs</i> of bee turf, but we
						think it's time to move on from <i>wall-to-wall</i>.
					</p>
					<p>
						As for 'weedeating', we won't run a string trimmer but
						we might make them into a salad.
					</p>
				</div>
			</section>

			<section id="contact-form">
				<h2>Start something</h2>

				<form
					id="contactForm"
					action="https://formspree.io/f/xyzdqbaw"
					method="POST"
				>
					<p>
						Tell us about your space and we'll start a conversation.
						No pressure, no sales pitch. Just two people talking
						about plants.
					</p>

					<label>
						Name
						<input
							type="text"
							name="name"
							placeholder="What should we call you?"
							required
						/>
					</label>

					<label>
						Email
						<input
							type="email"
							name="email"
							placeholder="your@email.com"
							required
						/>
					</label>

					<label>
						Phone (optional)
						<input
							type="tel"
							name="phone"
							placeholder="250-xxx-xxxx"
						/>
					</label>

					<label>
						City (optional)
						<input
							type="text"
							name="city"
							placeholder="Where do your plants live?"
						/>
					</label>

					<!-- Hidden field for Formspree -->
					<input
						type="hidden"
						name="_subject"
						value="New inquiry from Orbweaver website"
					/>

					<label>
						What's happening with your outdoor space?
						<textarea
							name="message"
							rows="4"
							placeholder="Honest assessment welcome. 'Total disaster' is a perfectly valid starting point."
							required
						></textarea>
					</label>

					<label>
						What service interests you most?
						<select name="service">
							<option value="">Choose one (optional)</option>
							<option value="coaching">Garden coaching</option>
							<option value="maintenance">
								Gentle maintenance
							</option>
							<option value="design">Full garden design</option>
							<option value="consultation">
								Just a consultation
							</option>
						</select>
					</label>

					<!-- Honeypot field for spam prevention -->
					<div
						style="position: absolute; left: -5000px"
						aria-hidden="true"
					>
						<input type="text" name="website" tabindex="-1" />
					</div>

					<button type="submit" class="btn btn-primary">
						Let's talk
					</button>
					<div
						id="formMessage"
						class="form-message"
						style="display: none"
					></div>
				</form>

				<div class="service-details">
					<div>
						<strong>Service area:</strong> &#8216;Cowichan
						Valley&#8217;
					</div>
					<div><strong>Consultation:</strong> $150 (incl. taxes)</div>
					<div><strong>Response time:</strong> Within one week.</div>
					<div><strong>Availability:</strong> Year-round. Booking fall starts.</div>
				</div>
			</section>
		</main>

		<footer>
			<p>
				<strong>Orbweaver Natural Landcare</strong><br />
				Quw&rsquo;utsun Traditional Lands<br />
			</p>
			<small>Beautiful outdoor spaces, without the warfare.</small>
		</footer>

		<script src="smartquotes.js"></script>
		<script>
			smartquotes();
		</script>

		<script>
			// Carousel state management to prevent flickering
			const carouselState = {};

			// Throttle function to limit scroll event frequency
			function throttle(func, limit) {
				let inThrottle;
				return function() {
					const args = arguments;
					const context = this;
					if (!inThrottle) {
						func.apply(context, args);
						inThrottle = true;
						setTimeout(() => inThrottle = false, limit);
					}
				}
			}

			// Initialize carousels with improved performance
			function initCarousels() {
				const carousels = [
					{ containerId: "howWeWorkCards", dotsId: "howWeWorkDots" },
					{ containerId: "whatWeDoCards", dotsId: "whatWeDoDots" },
				];

				carousels.forEach((config) => {
					const container = document.getElementById(config.containerId);
					const dotsContainer = document.getElementById(config.dotsId);

					if (!container || !dotsContainer) return;

					const cards = container.querySelectorAll("article");
					
					// Initialize or retrieve state for this carousel
					if (!carouselState[config.containerId]) {
						carouselState[config.containerId] = { 
							currentIndex: 0,
							scrollHandler: null
						};
					}

					// Add keyboard navigation (only once per container)
					if (!container.dataset.keyboardInit) {
						container.dataset.keyboardInit = 'true';
						container.addEventListener("keydown", (e) => {
							if (!cards.length) return;

							const cardWidth = cards[0].offsetWidth + 16;
							const currentScroll = container.scrollLeft;
							const currentIndex = Math.round(currentScroll / cardWidth);

							if (e.key === "ArrowRight") {
								e.preventDefault();
								const nextIndex = Math.min(currentIndex + 1, cards.length - 1);
								container.scrollTo({
									left: nextIndex * cardWidth,
									behavior: "smooth",
								});
							} else if (e.key === "ArrowLeft") {
								e.preventDefault();
								const prevIndex = Math.max(currentIndex - 1, 0);
								container.scrollTo({
									left: prevIndex * cardWidth,
									behavior: "smooth",
								});
							}
						});
					}

					if (window.innerWidth <= 768 && cards.length > 0) {
						// Create or update dot indicators
						if (dotsContainer.children.length !== cards.length) {
							dotsContainer.innerHTML = "";
							cards.forEach((_, index) => {
								const dot = document.createElement("span");
								dot.classList.toggle('active', 
									index === carouselState[config.containerId].currentIndex);
								dotsContainer.appendChild(dot);
							});
						}

						// Remove old scroll handler if it exists
						if (carouselState[config.containerId].scrollHandler) {
							container.removeEventListener('scroll', carouselState[config.containerId].scrollHandler);
						}

						// Create throttled scroll handler
						const updateDots = throttle(() => {
							const scrollPosition = container.scrollLeft;
							const cardWidth = cards[0].offsetWidth + 16;
							const currentIndex = Math.round(scrollPosition / cardWidth);

							// Only update if index actually changed
							if (carouselState[config.containerId].currentIndex !== currentIndex) {
								carouselState[config.containerId].currentIndex = currentIndex;
								
								// Use requestAnimationFrame for smooth visual updates
								requestAnimationFrame(() => {
									const dots = dotsContainer.querySelectorAll("span");
									dots.forEach((dot, index) => {
										dot.classList.toggle("active", index === currentIndex);
									});
								});
							}
						}, 100); // Throttle to 100ms

						// Store and add new scroll handler
						carouselState[config.containerId].scrollHandler = updateDots;
						container.addEventListener("scroll", updateDots, { passive: true });
						
						// Restore scroll position if returning to mobile view
						if (carouselState[config.containerId].currentIndex > 0) {
							const cardWidth = cards[0].offsetWidth + 16;
							container.scrollLeft = carouselState[config.containerId].currentIndex * cardWidth;
						}
					} else {
						// Clear dots on desktop
						dotsContainer.innerHTML = "";
						// Remove scroll handler on desktop
						if (carouselState[config.containerId].scrollHandler) {
							container.removeEventListener('scroll', carouselState[config.containerId].scrollHandler);
							carouselState[config.containerId].scrollHandler = null;
						}
					}
				});
			}

			// Initialize carousels on load
			window.addEventListener("load", initCarousels);
			
			// Debounced resize handler to prevent excessive re-initialization
			let resizeTimeout;
			window.addEventListener("resize", () => {
				clearTimeout(resizeTimeout);
				resizeTimeout = setTimeout(() => {
					initCarousels();
				}, 250);
			});

			// Form submission handler
			document
				.getElementById("contactForm")
				.addEventListener("submit", async function (e) {
					e.preventDefault();

					const form = e.target;
					const formData = new FormData(form);
					const btn = form.querySelector('button[type="submit"]');
					const messageDiv = document.getElementById("formMessage");

					// Check honeypot
					if (formData.get("website")) {
						return; // Bot detected, silently fail
					}

					// Disable button and show loading state
					btn.textContent = "Sending...";
					btn.disabled = true;
					messageDiv.style.display = "none";

					try {
						// Send to Formspree
						const response = await fetch(
							"https://formspree.io/f/xyzdqbaw",
							{
								method: "POST",
								headers: {
									Accept: "application/json",
								},
								body: formData, // Send FormData directly
							}
						);

						const result = await response.json();

						if (response.ok) {
							// Show success message
							messageDiv.textContent =
								"Message received! We'll be in touch within a week.";
							messageDiv.className = "form-message success";
							messageDiv.style.display = "block";

							// Reset form
							form.reset();

							// Reset button after delay
							setTimeout(() => {
								btn.textContent = "Let's talk";
								btn.disabled = false;
								messageDiv.style.display = "none";
							}, 5000);
						} else {
							// Handle Formspree errors
							const errorMsg =
								result.error ||
								"Form submission failed. Please try again.";
							throw new Error(errorMsg);
						}
					} catch (error) {
						// Show error message
						console.error("Form error:", error);
						messageDiv.textContent =
							error.message ||
							"Something went wrong. Please try again or email us directly.";
						messageDiv.className = "form-message error";
						messageDiv.style.display = "block";

						btn.textContent = "Let's talk";
						btn.disabled = false;
					}
				});

			// Add smooth scroll behaviour for any internal links
			document.querySelectorAll('a[href^="#"]').forEach((anchor) => {
				anchor.addEventListener("click", function (e) {
					e.preventDefault();
					const target = document.querySelector(
						this.getAttribute("href")
					);
					if (target) {
						target.scrollIntoView({ behavior: "smooth" });
					}
				});
			});
		</script>
	</body>
	
	<!-- Living Presence Animation for Orbweaver.ca -->
	<!-- Add this code just before the closing </body> tag of your site -->
	
	<canvas id="orb-presence-canvas" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 9999;"></canvas>
	
	<style>
		/* Butterfly elements */
		.orb-butterfly {
			position: fixed;
			width: 30px;
			height: 20px;
			pointer-events: none;
			z-index: 10000;
			opacity: 0;
			transition: opacity 2s ease;
		}
	
		.orb-butterfly-wing {
			position: absolute;
			width: 15px;
			height: 20px;
			background: radial-gradient(ellipse at center, 
				rgba(255, 179, 71, 0.3) 0%, 
				rgba(255, 206, 84, 0.2) 40%, 
				rgba(255, 255, 255, 0.1) 100%);
			border-radius: 50% 10% 50% 10%;
		}
	
		.orb-butterfly-wing.left {
			left: 0;
			transform-origin: right center;
			animation: orb-flutter-left 0.2s infinite alternate ease-in-out;
		}
	
		.orb-butterfly-wing.right {
			right: 0;
			transform-origin: left center;
			animation: orb-flutter-right 0.2s infinite alternate ease-in-out;
			transform: scaleX(-1);
		}
	
		@keyframes orb-flutter-left {
			0% { transform: rotateY(0deg); }
			100% { transform: rotateY(50deg); }
		}
	
		@keyframes orb-flutter-right {
			0% { transform: scaleX(-1) rotateY(0deg); }
			100% { transform: scaleX(-1) rotateY(50deg); }
		}
	
		/* Glimmer effect */
		.orb-glimmer {
			position: fixed;
			width: 4px;
			height: 4px;
			background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 0%, transparent 70%);
			border-radius: 50%;
			pointer-events: none;
			animation: orb-glimmer-fade 3s ease-out forwards;
			z-index: 10001;
		}
	
		@keyframes orb-glimmer-fade {
			0% {
				opacity: 0;
				transform: scale(0);
			}
			50% {
				opacity: 1;
				transform: scale(1);
			}
			100% {
				opacity: 0;
				transform: scale(1.5);
			}
		}
	</style>
	
	<script>
	(function() {
		// Encapsulate everything to avoid conflicts
		const canvas = document.getElementById('orb-presence-canvas');
		const ctx = canvas.getContext('2d');
		
		// Set canvas size
		function resizeCanvas() {
			canvas.width = window.innerWidth;
			canvas.height = window.innerHeight;
		}
		resizeCanvas();
		window.addEventListener('resize', resizeCanvas);
	
		// Mouse position tracking
		let mouseX = window.innerWidth / 2;
		let mouseY = window.innerHeight / 2;
		let mouseStillTimer = 0;
		let lastMouseX = mouseX;
		let lastMouseY = mouseY;
	
		window.addEventListener('mousemove', (e) => {
			mouseX = e.clientX;
			mouseY = e.clientY;
			mouseStillTimer = 0;
		});
	
		// Touch support for mobile
		window.addEventListener('touchstart', (e) => {
			if (e.touches.length > 0) {
				mouseX = e.touches[0].clientX;
				mouseY = e.touches[0].clientY;
				mouseStillTimer = 100; // Treat touch as "stillness"
			}
		});
	
		// Orb class
		class Orb {
			constructor() {
				this.reset();
				this.x = Math.random() * canvas.width;
				this.y = Math.random() * canvas.height;
			}
	
			reset() {
				this.targetX = Math.random() * canvas.width;
				this.targetY = Math.random() * canvas.height;
				this.size = Math.random() * 12 + 4;
				this.baseOpacity = Math.random() * 0.25 + 0.05; // Even more subtle
				this.opacity = 0;
				this.pulsePhase = Math.random() * Math.PI * 2;
				this.speed = Math.random() * 0.4 + 0.2;
				this.touchDistance = Math.random() * 80 + 40;
				this.hasApproached = false;
				this.approachCooldown = 0;
				this.glowIntensity = 0;
			}
	
			update() {
				// Fade in slowly
				if (this.opacity < this.baseOpacity) {
					this.opacity += 0.0005;
				}
	
				// Organic movement
				const dx = this.targetX - this.x;
				const dy = this.targetY - this.y;
				const distance = Math.sqrt(dx * dx + dy * dy);
	
				if (distance > 5) {
					this.x += (dx / distance) * this.speed;
					this.y += (dy / distance) * this.speed;
				} else {
					this.targetX = Math.random() * canvas.width;
					this.targetY = Math.random() * canvas.height;
				}
	
				// Floating motion
				this.x += Math.sin(Date.now() * 0.0001 + this.pulsePhase) * 0.3;
				this.y += Math.cos(Date.now() * 0.0001 + this.pulsePhase) * 0.2;
	
				this.pulsePhase += 0.01;
	
				// Approach still mouse
				if (mouseStillTimer > 120 && !this.hasApproached && this.approachCooldown <= 0) {
					const mouseDistance = Math.sqrt(
						Math.pow(this.x - mouseX, 2) + 
						Math.pow(this.y - mouseY, 2)
					);
					
					if (mouseDistance < 200) {
						this.targetX = mouseX + (Math.random() - 0.5) * 50;
						this.targetY = mouseY + (Math.random() - 0.5) * 50;
						this.speed = 0.6;
						this.glowIntensity = Math.min(1, this.glowIntensity + 0.02);
						
						if (mouseDistance < this.touchDistance) {
							this.hasApproached = true;
							this.approachCooldown = 300;
							createGlimmer(this.x, this.y);
						}
					}
				} else {
					this.speed = Math.random() * 0.4 + 0.2;
					this.glowIntensity = Math.max(0, this.glowIntensity - 0.01);
				}
	
				if (this.approachCooldown > 0) {
					this.approachCooldown--;
					if (this.approachCooldown === 0) {
						this.hasApproached = false;
					}
				}
	
				// Boundary wrapping
				if (this.x < -50) this.x = canvas.width + 50;
				if (this.x > canvas.width + 50) this.x = -50;
				if (this.y < -50) this.y = canvas.height + 50;
				if (this.y > canvas.height + 50) this.y = -50;
			}
	
			draw() {
				const pulse = Math.sin(this.pulsePhase) * 0.15 + 1;
				const currentSize = this.size * pulse;
				
				// Soft glow
				const gradient = ctx.createRadialGradient(
					this.x, this.y, 0,
					this.x, this.y, currentSize * 2.5
				);
				
				gradient.addColorStop(0, `rgba(255, 248, 230, ${this.opacity * 0.6 + this.glowIntensity * 0.2})`);
				gradient.addColorStop(0.4, `rgba(255, 236, 200, ${this.opacity * 0.3})`);
				gradient.addColorStop(1, `rgba(255, 255, 255, 0)`);
				
				ctx.fillStyle = gradient;
				ctx.beginPath();
				ctx.arc(this.x, this.y, currentSize * 2.5, 0, Math.PI * 2);
				ctx.fill();
				
				// Inner core
				ctx.fillStyle = `rgba(255, 255, 245, ${this.opacity * 0.4 + this.glowIntensity * 0.3})`;
				ctx.beginPath();
				ctx.arc(this.x, this.y, currentSize * 0.4, 0, Math.PI * 2);
				ctx.fill();
			}
		}
	
		// Create orbs
		const orbs = [];
		const orbCount = 6;
		for (let i = 0; i < orbCount; i++) {
			setTimeout(() => {
				orbs.push(new Orb());
			}, i * 3000 + Math.random() * 2000);
		}
	
		// Butterfly creation
		function createButterfly() {
			const butterfly = document.createElement('div');
			butterfly.className = 'orb-butterfly';
			butterfly.innerHTML = `
				<div class="orb-butterfly-wing left"></div>
				<div class="orb-butterfly-wing right"></div>
			`;
			document.body.appendChild(butterfly);
	
			const startX = Math.random() < 0.5 ? -50 : window.innerWidth + 50;
			let x = startX;
			let y = Math.random() * window.innerHeight;
			let vx = startX < 0 ? 1 : -1;
			let vy = (Math.random() - 0.5) * 0.5;
			let wavePhase = Math.random() * Math.PI * 2;
	
			butterfly.style.left = x + 'px';
			butterfly.style.top = y + 'px';
			
			setTimeout(() => {
				butterfly.style.opacity = '0.6';
			}, 100);
	
			const moveButterfly = () => {
				x += vx * 1.5;
				y += vy * 1.5 + Math.sin(wavePhase) * 1.2;
				wavePhase += 0.05;
	
				if (Math.random() < 0.015) {
					vy = (Math.random() - 0.5) * 0.5;
				}
	
				butterfly.style.left = x + 'px';
				butterfly.style.top = y + 'px';
	
				if (x < -60 || x > window.innerWidth + 60) {
					butterfly.style.opacity = '0';
					setTimeout(() => {
						if (butterfly.parentNode) {
							document.body.removeChild(butterfly);
						}
					}, 2000);
				} else {
					requestAnimationFrame(moveButterfly);
				}
			};
	
			requestAnimationFrame(moveButterfly);
		}
	
		// Create glimmer
		function createGlimmer(x, y) {
			const glimmer = document.createElement('div');
			glimmer.className = 'orb-glimmer';
			glimmer.style.left = x + 'px';
			glimmer.style.top = y + 'px';
			document.body.appendChild(glimmer);
			
			setTimeout(() => {
				if (glimmer.parentNode) {
					document.body.removeChild(glimmer);
				}
			}, 3000);
		}
	
		// Butterfly spawning
		setInterval(() => {
			if (Math.random() < 0.25) { // 25% chance
				createButterfly();
			}
		}, 20000); // Check every 20 seconds
	
		// Animation loop
		function animate() {
			ctx.clearRect(0, 0, canvas.width, canvas.height);
			
			// Update mouse stillness
			if (Math.abs(mouseX - lastMouseX) < 2 && Math.abs(mouseY - lastMouseY) < 2) {
				mouseStillTimer++;
			} else {
				mouseStillTimer = 0;
			}
			lastMouseX = mouseX;
			lastMouseY = mouseY;
			
			// Update and draw orbs
			orbs.forEach(orb => {
				orb.update();
				orb.draw();
			});
			
			requestAnimationFrame(animate);
		}
	
		animate();
	
		// First butterfly after 8 seconds
		setTimeout(createButterfly, 8000);
	})();
	</script>
	
</html>
